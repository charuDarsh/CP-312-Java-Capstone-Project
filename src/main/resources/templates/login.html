<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Login</title>
    <link rel="stylesheet" th:href="@{/css/login.css}" />
    <script>
        // JavaScript function to validate the login form
        function validateLoginForm() {
            const email = document.getElementById("email").value;
            const password = document.getElementById("password").value;

            // Email validation
            const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailPattern.test(email)) {
                alert("Please enter a valid email address.");
                return false; // Prevent form submission
            }

            // Password validation
            if (password.length < 4) {
                alert("Password must be at least 4 characters long.");
                return false; // Prevent form submission
            }

            return true; // Allow form submission
        }

        // Function to display an error message for incorrect login
        function displayError(message) {
            const errorDiv = document.querySelector('.error');
            errorDiv.innerHTML = message; // Set the error message
            errorDiv.style.display = 'block'; // Show the error message
        }
    </script>
</head>
<body>
<div class="form-container">
    <h1>Login</h1>
    <!-- Display error message if any -->
    <div th:if="${error}" class="error">
        <p th:text="${error}"></p>
    </div>
    <form th:action="@{/users/login}" method="post" onsubmit="return validateLoginForm();">
        <label for="email">Email:</label>
        <input type="email" id="email" name="email" required/>

        <label for="password">Password:</label>
        <input type="password" id="password" name="password" required/>

        <button type="submit">Login</button>
    </form>

    <!-- Register link added below -->
    <p>Don't have an account? <a th:href="@{/users/register}">Register here</a></p>
</div>
<script>
    // Check if there's an error attribute in the model
    const errorMessage = /*[[${error}]]*/ 'null';
    if (errorMessage !== 'null') {
        displayError(errorMessage); // Show error message if exists
    }
</script>
</body>
</html>


<!--<!DOCTYPE html>-->
<!--<html xmlns:th="http://www.thymeleaf.org">-->
<!--<head>-->
<!--    <title>Login</title>-->
<!--</head>-->
<!--<body>-->
<!--<h1>Login</h1>-->
<!--<form th:action="@{/users/login}" method="post">-->
<!--    <label for="email">Email:</label>-->
<!--    <input type="email" id="email" name="email" required/><br/>-->
<!--    <label for="password">Password:</label>-->
<!--    <input type="password" id="password" name="password" required/><br/>-->
<!--    <button type="submit">Login</button>-->
<!--</form>-->

<!--&lt;!&ndash; Register link added below &ndash;&gt;-->
<!--<p>Don't have an account? <a th:href="@{/users/register}">Register here</a></p>-->

<!--</body>-->
<!--</html>-->


